<!-- <!DOCTYPE html> -->
<html>
<head>
	<meta charset=utf-8>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detecting HTML5 Features - Dive Into HTML5</title>
</head>
<body style="margin-left: 220; margin-right: 220;">
	<div style="margin: 25;">
		<p style="font-family: serif;">You are here: <a href="">Home</a> ‣ <a href="">Dive Into HTML5</a> ‣</p>
	</div>
	<br>
	<div style="font-family: cursive; text-align: center; font-size: 150%" >
		<h1>№2<br> DETECTING HTML5 FEATURES</h1>
		<br>
	</div>
	<div style="text-align: center; margin-bottom: 15; font-size: large;">
		<a href="#" onclick="show()" id="swap">show table of contents</a>
	</div>
	<div id="table_content" style="display: none;">
		<table align="center" style="text-align: center; font-size: large;">
			<tr><td><a href="">↑ Full table of contents</a></td></tr>
			<tr><td><a href=""> Diving In</a></td></tr>
			<tr><td><a href=""> Detection Techniques</a></td></tr>
			<tr><td><a href=""> Modernizr, an HTML5 Detection Library</a></td></tr>
			<tr><td><a href=""> Canvas</a></td></tr>
			<tr><td><a href=""> Canvas Text</a></td></tr>
			<tr><td><a href=""> Video</a></td></tr>
			<tr><td><a href=""> Video Formats</a></td></tr>
			<tr><td><a href=""> Local Storage</a></td></tr>
			<tr><td><a href=""> Web Workers</a></td></tr>
			<tr><td><a href=""> Offline Web Applications</a></td></tr>
			<tr><td><a href=""> Geolocation</a></td></tr>
			<tr><td><a href=""> Input Types</a></td></tr>
			<tr><td><a href=""> Placeholder Text</a></td></tr>
			<tr><td><a href=""> Form Autofocus</a></td></tr>
			<tr><td><a href=""> Microdata</a></td></tr>
			<tr><td><a href=""> History API</a></td></tr>
			<tr><td><a href=""> Further Reading</a></td></tr>
		</table>
	</div>
	<div style="text-align: center; font-size: 170%; margin: 50;"><p>❧</p></div>
	<div style="font-family: cursive; text-align: center;font-size: 150%" >
		<h2>Diving In</h2>
		<br>
	</div>
	<div style="line-height: 1.6; font-size: large;">
		<img src="http://diveinto.html5doctor.com/i/aoc-y.png" alt=Y width=109 height=105; style="float: left; margin-right: 15">
		<p>ou may well ask: “How can I start using HTML5 if older browsers don’t support it?” But the question itself is misleading. HTML5 is not one big thing; it is a collection of individual features. So you can’t detect “HTML5 support,” because that doesn’t make any sense. But you <i>can</i> detect support for individual features, like canvas, video, or geolocation.</p>
	</div>

	<div style="text-align: center; font-size: 170%; margin: 50;"><p>❧</p></div>
	<div style="font-family: cursive; text-align: center;font-size: 150%" >
		<h2>DETECTION TECHNIQUES</h2>
		<br>
	</div>
	<div style="line-height: 1.6; font-size: large;">
		<p>When your browser renders a web page, it constructs a Document Object Model (DOM), a collection of objects that represent the HTML elements on the page. Every element — every &lt;p&gt;, every &lt;div&gt;, every &lt;span&gt; — is represented in the DOM by a different object. (There are also global objects, like window and document, that aren’t tied to specific elements.)</p>
			<img src="http://diveinto.html5doctor.com/i/openclipart.org_johnny_automatic_peeking_out_the_window.png" width=257 height=436 alt="girl peeking out the window"; style="float: right; margin-left: 20; margine-top: 20; margine-bottom: 20">
		<p>All DOM objects share a set of common properties, but some objects have more than others. In browsers that support HTML5 features, certain objects will have unique properties. A quick peek at the DOM will tell you which features are supported.</p>
		<p>There are four basic techniques for detecting whether a browser supports a particular feature. From simplest to most complex:</p>
		<ol>
			<li>Check if a certain property exists on a global object (such as window or navigator).<br> <p>Example: <a href="http://diveinto.html5doctor.com/detect.html#geolocation"> testing for geolocation support</a></p></li>
			<br>
			<li>Create an element, then check if a certain property exists on that element. <br> <p>Example: <a href="http://diveinto.html5doctor.com/detect.html#canvas">testing for canvas support</a></p></li>
			<br>
			<li>Create an element, check if a certain method exists on that element, then call the method and check the value it returns.<br><p>Example<a href="http://diveinto.html5doctor.com/detect.html#video-formats">testing which video formats are supported</a></p></li>
			<br>
			<li>Create an element, set a property to a certain value, then check if the property has retained its value.<br><p>Example:<a href="http://diveinto.html5doctor.com/detect.html#input-types">testing which &lt;input&gt; types are supported</a></p></li>
			<br>
		</ol>
	</dir>

	<div style="text-align: center; font-size: 170%; margin: 50;"><p>❧</p></div>
	<div style="font-family: cursive; text-align: center;font-size: 150%" >
		<h2>MODERNIZR, AN HTML5 DETECTION LIBRARY</h2>
	</div>

	<div style="line-height: 1.6; font-size: large;">
		<p><a href="http://www.modernizr.com/">Modernizr</a> is an open source, MIT-licensed JavaScript library that detects support for many HTML5 & CSS3 features. You should always use the latest version. To use it, include the following &lt;script&gt; element at the top of your page.</p>
		<pre>
	&lt;!DOCTYPE html&gt;
	&lt;html&gt;
        &lt;head&gt;
  	 &lt;meta charset="utf-8"&gt;
         &lt;title&gt;Dive Into HTML5&lt;/title&gt;
         <mark>&lt;script src="modernizr.min.js">&lt;/script></mark> <span class=arrow>&nbsp;&#x219c;</span> It goes to your &lt;head>
	&lt;/head&gt;
	 &lt;body&gt;
 	  ...
	 &lt;/body&gt;
	&lt;/html&gt;
		</pre>
	<p>
		Modernizr runs automatically. There is no modernizr_init() function to call. When it runs, it creates a global object called Modernizr, that contains a set of Boolean properties for each feature it can detect. For example, if your browser supports the <a href="http://diveinto.html5doctor.com/canvas.html">canvas API</a>, the Modernizr.canvas property will be true. If your browser does not support the canvas API, the Modernizr.canvas property will be false.</p>
		<pre>
	if (Modernizr.canvas) {
            // let's draw some shapes!
        } else {
            // no native canvas support available :(
        }
		</pre>
	</div>
	<div style="text-align: center; font-size: 170%; margin: 50;"><p>❧</p></div>
	<div style="font-family: cursive; text-align: center;font-size: 150%" >
		<h2>CANVAS</h2>
	</div>
	<div style="line-height: 1.6; font-size: large;">
		<figure class="sign" style="float: right;">
   				<p><img src="http://diveinto.html5doctor.com/i/openclipart.org_johnny_automatic_fishing_boat.png" width=300 height=203 alt="man fishing in a canoe"></p>
   				<figcaption style="border-bottom: double; border-top: double;">Your browser supports the canvas API.</figcaption>
  		</figure>
		<p>Your browser supports the canvas API.
		HTML5 defines <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html">the &lt;canvas> element</a> as “a resolution-dependent bitmap canvas that can be used for rendering graphs, game graphics, or other visual images on the fly.” A canvas is a rectangle in your page where you can use JavaScript to draw anything you want. HTML5 defines a set of functions (“the canvas API”) for drawing shapes, defining paths, creating gradients, and applying transformations.</p>
		<p>Checking for the canvas API uses <a href="http://diveinto.html5doctor.com/detect.html#techniques">detection technique #2</a>. If your browser supports the canvas API, the DOM object it creates to represent a &lt;canvas> element will have a <a href="http://diveinto.html5doctor.com/canvas.html#shapes">getContext() method</a>. If your browser doesn’t support the canvas API, the DOM object it creates for a &lt;canvas> element will only have the set of common properties, but not anything canvas-specific.</p>
		<pre>
	function supports_canvas() {
  		return !!document.createElement('canvas').getContext;
	}
		</pre>
		<p>This function starts by creating a dummy &lt;canvas> element. But the element is never attached to your page, so no one will ever see it. It’s just floating in memory, going nowhere and doing nothing, like a canoe on a lazy river.</p>
		<pre>
	return !!document.<mark>createElement('canvas')</mark>.getContext;
		</pre>
		<p>As soon as you create the dummy &lt;canvas> element, you test for the presence of a getContext() method. This method will only exist if your browser supports the canvas API.</p>
		<pre>
	return !!document.createElement('canvas').<mark>getContext</mark>;
		</pre>
		<p>Finally, you use the double-negative trick to force the result to a Boolean value (true or false).</p>
		<pre>
	return <mark>!!</mark>document.createElement('canvas').getContext;
		</pre>
	<p>This function will detect support for most of the canvas API, including <a href="http://diveinto.html5doctor.com/canvas.html#shapes">shapes</a> , <a href="http://diveinto.html5doctor.com/canvas.html#paths">paths</a> , <a href="http://diveinto.html5doctor.com/canvas.html#gradients">gradients & patterns</a> . It will not detect the third-party <a href="http://diveinto.html5doctor.com/canvas.html#ie">explorercanvas library</a> that implements the canvas API in Microsoft Internet Explorer.</p>
	<p>Instead of writing this function yourself, you can use <a href="http://diveinto.html5doctor.com/detect.html#modernizr">Modernizr</a> to detect support for the canvas API.</p>

	<p style="padding-left:6em"><span class=arrow>&#x21b6;</span> check for canvas text support</p>
	<pre>   if (<mark>Modernizr.canvastext</mark>) {
     // let's draw some text!
   } else {
     // no native canvas text support available :(
   }</pre>

	</div>

	<div style="text-align: center; font-size: 170%; margin: 50;"><p>❧</p></div>
	<div style="font-family: cursive; text-align: center;font-size: 150%" >
		<h2>VIDEO</h2>
	</div>

	<div style="line-height: 1.6; font-size: large;">
		<p>HTML5 defines a new element called &lt;video> for embedding video in your web pages. Embedding video used to be impossible without third-party plugins such as Apple QuickTime® or Adobe Flash®.</p>
		<figure style="float: right;">
			<img src="http://diveinto.html5doctor.com/i/openclipart.org_johnny_automatic_at_the_theater.png">
			<p style="border-bottom: double;border-top: double;">Your browser supports HTML5<br> video.</p>
		</figure>
		<p>The &lt;video> element is designed to be usable without any detection scripts. You can specify multiple video files, and browsers that support HTML5 video will choose one based on what video formats they support. (See “A gentle introduction to video encoding” <a href="http://diveintomark.org/archives/2008/12/18/give-part-1-container-formats">part 1: container</a> <a href="http://diveintomark.org/archives/2008/12/18/give-part-1-container-formats"> formats</a> and <a href="http://diveintomark.org/archives/2008/12/19/give-part-2-lossy-video-codecs">part 2: lossy</a> video codecs to learn about different video formats.)</p>
		<p>Browsers that don’t support HTML5 video will ignore the &lt;video> element completely, but you can use this to your advantage and tell them to play video through a third-party plugin instead. Kroc Camen has designed a solution called Video for Everybody! that uses HTML5 video where available, but falls back to QuickTime or Flash in older browsers. This solution uses no JavaScript whatsoever, and it works in virtually every browser, including mobile browsers.</p>
		<p>If you want to do more with video than plop it on your page and play it, you’ll need to use JavaScript. Checking for video support uses detection technique #2. If your browser supports HTML5 video, the DOM object it creates to represent a &lt;video> element will have a canPlayType() method. If your browser doesn’t support HTML5 video, the DOM object it creates for a &lt;video> element will have only the set of properties common to all elements. You can check for video support using this function:</p>
		<br>
		<pre>   function supports_video() {
     return !!document.createElement('video').canPlayType;
   }
        </pre>
        <p>Instead of writing this function yourself, you can use <a href="http://diveinto.html5doctor.com/detect.html#modernizr">Modernizr</a> to detect support for HTML5 video</p>
        <p style="padding-left:6em"><span class=arrow>&#x21b6;</span> check for HTML5 video support</p>
        <pre>   if (<mark>Modernizr.video</mark>) {
     // let's play some video!
   } else {
     // no native video support available :(
     // maybe check for QuickTime or Flash instead
   }
		</pre>
		<p>In <a href="http://diveinto.html5doctor.com/video.html">the Video chapter</a>, I’ll explain another solution that uses these detection techniques to convert &lt;video> elements to Flash-based video players, for the benefit of browsers that don’t support HTML5 video.</p>
		<p>There is a separate test for detecting which video formats your browser can play, which I will demonstrate next.</p>

	</div>

	<div style="text-align: center; font-size: 170%; margin: 50;"><p>❧</p></div>
	<div style="font-family: cursive; text-align: center;font-size: 150%" >
		<h2>VIDEO FORMATS</h2>
	</div>

	<div style="line-height: 1.6; font-size: large;">
		<p>Video formats are like written languages. An English newspaper may convey the same information as a Spanish newspaper, but if you can only read English, only one of them will be useful to you! To play a video, your browser needs to understand the “language” in which the video was written.</p>
		<figure style="float: left;">
			<img src="http://diveinto.html5doctor.com/i/openclipart.org_johnny_automatic_man_reading_newspaper.png" alt="audience at the theater" width=250 height=300>
			<p style="border-bottom: double;border-top: double;">Your browser can play both<br> Ogg Theora and H.264 video. Hey,<br> you can play WebM video, too!</p>
		</figure>
		<p>The “language” of a video is called a “codec” — this is the algorithm used to encode the video into a stream of bits. There are dozens of codecs in use all over the world. Which one should you use? The unfortunate reality of HTML5 video is that browsers can’t agree on a single codec. However, they seem to have narrowed it down to two. One codec costs money (because of patent licensing), but it works in Safari and on the iPhone. (This one also works in Flash if you use a solution like Video for Everybody!) The other codec is free and works in open source browsers like Chromium and Mozilla Firefox.</p>
		<p>Checking for video format support uses detection technique #3. If your browser supports HTML5 video, the DOM object it creates to represent a &lt;video> element will have a canPlayType() method. This method will tell you whether the browser supports a particular video format.</p>
		<p>This function checks for the patent-encumbered format supported by Macs and iPhones.</p>
		<pre>  function supports_h264_baseline_video() {
    if (!supports_video()) { return false; }
    var v = document.createElement("video");
    return v.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');
		</pre>
		<p>The function starts by checking for HTML5 video support, using the supports_video() function you just saw in the previous section. If your browser doesn’t support HTML5 video, it certainly won’t support any video formats!</p>
		<pre>    if (<mark>!supports_video()</mark>) { return false; }</pre>
		<p>Then the function creates a dummy &lt;video> element (but doesn’t attach it to the page, so it won’t be visible) and calls the canPlayType() method. This method is guaranteed to be there, because the supports_video() function just checked for it.</p>
		<pre>    var <makr>v</makr> = document.createElement("video");</pre>
		<p>A “video format” is really a combination of different things. In technical terms, you’re asking the browser whether it can play H.264 Baseline video and AAC LC audio in an MPEG-4 container. (I’ll explain what all that means in the Video chapter. You might also be interested in reading A gentle introduction to video encoding.)</p>
		<pre>    return v.canPlayType('<mark>video/mp4; codecs="avc1.42E01E, mp4a.40.2"</mark>');</pre>
		<p>The canPlayType() function doesn’t return true or false. In recognition of how complex video formats are, the function returns a string:</p>
		<ul>
			<li>"probably" if the browser is fairly confident it can play this format</li>
			<li>"maybe" if the browser thinks it might be able to play this format</li>
			<li>"" (an empty string) if the browser is certain it can’t play this format</li>
		</ul>
		<p>This second function checks for the open video format supported by Mozilla Firefox and other open source browsers. The process is exactly the same; the only difference is the string you pass in to the canPlayType() function. In technical terms, you’re asking the browser whether it can play Theora video and Vorbis audio in an Ogg container.</p>
		<pre>   function supports_ogg_theora_video() {
     if (!supports_video()) { return false; }
     var v = document.createElement("video");
     return v.canPlayType('video/ogg; codecs="theora, vorbis"');
   }
		</pre>
		<p>Finally, WebM is a newly open-sourced (and non-patent-encumbered) video codec that will be included in the next version of major browsers, including Chrome, Firefox, and Opera. You can use the same technique to detect support for open WebM video.</p>
		<pre>   function supports_webm_video() {
     if (!supports_video()) { return false; }
     var v = document.createElement("video");
     return v.canPlayType('video/webm; codecs="vp8, vorbis"');
   }
		</pre>
		<p>Instead of writing this function yourself, you can use Modernizr (1.5 or later) to detect support for different HTML5 video formats.</p>	
		<p style="padding-left:6em"><span class=arrow>&#x21b6;</span> check for HTML5 video format</p>
		<pre>   if (Modernizr.video) {
     // let's play some video! but what kind?
     if (<mark>Modernizr.video.webm</mark>) {
       // try WebM
     } else if (<mark>Modernizr.video.ogg</mark>) {
       // try Ogg Theora + Vorbis in an Ogg container
     } else if (<mark>Modernizr.video.h264</mark>){
       // try H.264 video + AAC audio in an MP4 container
     }
   }
		</pre>
	</div>
		<div style="text-align: center; font-size: 170%; margin: 50;"><p>❧</p></div>
	<div style="font-family: cursive; text-align: center;font-size: 150%" >
		<h2>LOCAL STORAGE</h2>
	</div>
	<div style="line-height: 1.6; font-size: large;">
		<figure style="float: right;">
			<img src="http://diveinto.html5doctor.com/i/openclipart.org_johnny_automatic_half_stack_of_horizontal_sections.png" alt="filing cabinet with drawers of different sizes" width=135 height=341>
			<p style="border-bottom: double;border-top: double;">Your browser<br>supports HTML5<br>storage.</p>
		</figure>
		<p>HTML5 storage provides a way for web sites to store information on your computer and retrieve it later. The concept is similar to cookies, but it’s designed for larger quantities of information. Cookies are limited in size, and your browser sends them back to the web server every time it requests a new page (which takes extra time and precious bandwidth). HTML5 storage stays on your computer, and web sites can access it with JavaScript after the page is loaded.</p>
	</div>
	<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
	<div>
		<table style="border-color: black; border-collapse: collapse; border-spacing: 1px; border: solid; border-width: 1px;">
			<tr>
				<th align="left" style="font-family: cursive; color: white; background-color: black; font-size: x-large;">ASK PROFESSOR MARKUP</th>
			</tr>
			<tr>
				<td style="line-height: 1.6; font-size: large; border-collapse: collapse;">	
					<blockquote>
					<p><span>&#x261E;</span>Q: Is local storage really part of <abbr>HTML5</abbr>? Why is it in a separate specification?<br>
					A: The short answer is yes, local storage is part of <abbr>HTML5</abbr>. The slightly longer answer is that local storage used to be part of the main <abbr>HTML5</abbr> specification, but it was split out into a separate specification because some people in the <abbr>HTML5</abbr> Working Group complained that <abbr>HTML5</abbr> was too big. If that sounds like slicing a pie into more pieces to reduce the total number of calories&hellip; well, welcome to the wacky world of standards.
					</blockquote>
				</td>
			</tr>
		</table>
	</div>
	<div style="line-height: 1.6; font-size: large;">
		<p>Checking for HTML5 storage support uses detection technique #1. If your browser supports HTML5 storage, there will be a localStorage property on the global window object. If your browser doesn’t support HTML5 storage, the localStorage property will be undefined. Due to an unfortunate bug in older versions of Firefox, this test will raise an exception if cookies are disabled, so the entire test is wrapped in a try..catch statement.</p>
		<pre>   function supports_local_storage() {
     try {
       return 'localStorage' in window && window['localStorage'] !== null;
     } catch(e){
       return false;
     }
   }
		</pre>
		<p>Instead of writing this function yourself, you can use Modernizr (1.1 or later) to detect support for HTML5 local storage.</p>
		<p style="padding-left:6em"><span class=arrow>&#x21b6;</span> check for HTML5 local storage</p>
		<pre>   if (<mark>Modernizr.localstorage</mark>) {
     // window.localStorage is available!
   } else {
     // no native support for local storage :(
     // maybe try Gears or another third-party solution
   }
		</pre>
		<p>Note that JavaScript is case-sensitive. The Modernizr attribute is called localstorage (all lowercase), but the DOM property is called window.localStorage (mixed case).</p>

	</div>
	<div>
		<table style="border-color: black; border-collapse: collapse; border-spacing: 1px; border: solid; border-width: 1px;">
			<tr>
				<th align="left" style="font-family: cursive; color: white; background-color: black; font-size: x-large;">ASK PROFESSOR MARKUP</th>
			</tr>
			<tr>
				<td style="line-height: 1.6; font-size: large; border-collapse: collapse;">	
					<blockquote>
					<p><span>&#x261E;</span>Q: How secure is my <abbr>HTML5</abbr> storage database? Can anyone read it?<br>
					A: Anyone who has physical access to your computer can probably look at (or even change) your <abbr>HTML5</abbr> storage database. Within your browser, any web site can read and modify its own values, but sites can&#8217;t access values stored by other sites. This is called a <a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/origin-0.html#origin-0>same-origin restriction</a>.
					</blockquote>
				</td>
			</tr>
		</table>
	</div>
	<div style="text-align: center; font-size: 170%; margin: 50;"><p>❧</p></div>
	<div style="font-family: cursive; text-align: center;font-size: 150%" >
		<h2>WEB WORKERS</h2>
	</div>
	<div style="font-size: large;line-height: 1.6;">
		<figure style="float: right; margin-left: 15; margin-bottom: 20">
			<p style="border-bottom: double;border-top: double;">Your browser supports web workers.</p>
		</figure>
		<p>Web Workers provide a standard way for browsers to run JavaScript in the background. With web workers, you can spawn multiple “threads” that all run at the same time, more or less. (Think of how your computer can run multiple applications at the same time, and you’re most of the way there.) These “background threads” can do complex mathematical calculations, make network requests, or access local storage while the main web page responds to the user scrolling, clicking, or typing.</p>
		<p>Checking for web workers uses detection technique #1. If your browser supports the Web Worker API, there will be a Worker property on the global window object. If your browser doesn’t support the Web Worker API, the Worker property will be undefined.</p>
		<pre>   function supports_web_workers() {
     return !!window.Worker;
   }
		</pre>
		<p>Instead of writing this function yourself, you can use Modernizr (1.1 or later) to detect support for web workers.</p>
		<p style="padding-left:6em"><span class=arrow>&#x21b6;</span> check for web workers</p>
		<pre>   if (<mark>Modernizr.webworkers</mark>) {
     // window.Worker is available!
   } else {
     // no native support for web workers :(
     // maybe try Gears or another third-party solution
   }
		</pre>
		<p>Note that JavaScript is case-sensitive. The Modernizr attribute is called webworkers (all lowercase), but the DOM object is called window.Worker (with a capital “W” in “Worker”).</p>
	</div>

	<div style="text-align: center; font-size: 170%; margin: 50;"><p>❧</p></div>
	<div style="font-family: cursive; text-align: center;font-size: 150%" >
		<h2>OFFLINE WEB APPLICATIONS</h2>
	</div>
	<div style="line-height: 1.6; font-size: large;">
		
	</div>



</body>

<script type="text/javascript">
	function show() {
	    var x = document.getElementById("table_content");
	    if (x.style.display === "none") {
	        x.style.display = "block";
	        document.getElementById("swap").innerHTML = "hide table of contents";
	    } else {
	        x.style.display = "none";
	        document.getElementById("swap").innerHTML = "show table of contents";
	    }
	}
</script>

</html>